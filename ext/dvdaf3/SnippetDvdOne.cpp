#include "SnippetDvdOne.h"

void CSnippetDvdOne::EchoRow(CStr &pStr)
{
	//<table class='one_table'><tr><td class='one_pic' rowspan='2'><div><a id='a_0000000' imgsel='1' class='dvd_pic' href='http://www.filmaf.edu/dvd/0000000'><img id='zo_0000000' src='http://dv1.us/p1/252/003252-d0.jpg' alt='' /><br />0000000</a></div></td><td class='one_tit'>Grand Illusion - The Criterion Collection (1937)<br />( Grande illusion, La )<br />Spine #1</td></tr><tr><td><table class='one_top'><tr><td><table><tr><td class='one_lbl'>Director:</td><td><a class='dvd_dir' href='http://www.filmaf.edu/gd/jean-renoir'>Jean Renoir</a></td></tr><tr><td class='one_lbl'>DVD Publisher:</td><td><a class='dvd_pub' href='http://www.filmaf.edu/search.html?pub=Criterion%20Collection'>The Criterion Collection</a></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>DVD country:</td><td>U.S.</td></tr><tr><td class='one_lbl'>Source:</td><td>DVD Package</td></tr><tr><td class='one_lbl'>Media type:</td><td>DVD</td></tr><tr><td class='one_lbl'>Region:</td><td>1: US and Canada</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>Film release year:</td><td>1937</td></tr><tr><td class='one_lbl'>Film release date:</td><td>1937-06-08</td></tr><tr><td class='one_lbl'>Original primary language:</td><td>French, German, English, Russian</td></tr><tr><td class='one_lbl'>Primary genre:</td><td><a class='dvd_gen' href='http://www.filmaf.edu/search.html?genre=drama-war'>Drama / War</a></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>DVD release status:</td><td>Out of print</td></tr><tr><td class='one_lbl'>DVD release date:</td><td>1999-11-23</td></tr><tr><td class='one_lbl'>Out of print date:</td><td>2010-03-31</td></tr><tr><td class='one_lbl'>Links:</td><td><a class='dvd_amz' href='http://www.filmaf.edu/rt.php?vd=amz3252' target='amz'>amz</a>, <a class='dvd_imdb' href='http://www.filmaf.edu/rt.php?vd=imd3252-0' target='imdb'>imdb</a></td></tr></table></td></tr></table><div id='one_support'><img src='http://dv1.us/d1/00/bc00.png' id='ic_0003252' height='22' width='24' alt='Add or remove from cart' /> <img src='http://dv1.us/d1/00/bd00.png' id='id_0003252' height='22' width='24' alt='Compare prices' /><p>Support FilmAf by using our price comparison engine :)</p></div></td></tr><tr><td colspan='2'><table class='one_top'><tr><td><table><tr><td class='one_lbl'>Number of titles:</td><td>1</td></tr><tr><td class='one_lbl'>Number of discs:</td><td>1</td></tr></table></td><td><table><tr><td class='one_lbl'>UPC:</td><td>0-37429-12192-4</td></tr><tr><td class='one_lbl'>Studio product code:</td><td></td></tr></table></td><td><table><tr><td class='one_lbl'>List price:</td><td>39.95</td></tr></table></td></tr></table><div id='one_improve'><a href='http://www.filmaf.edu/utils/pic-mngt.html?obj_type=dvd&obj=3252'>Upload Better Picture</a>&nbsp;| <a href='http://www.filmaf.edu/utils/dvd-edit.html?dvd=3252'>Improve&nbsp;Title&nbsp;Info</a></div></td></tr></table><table class='one_table'><tr><td><form id='mydvd' name='mydvd' action='/owned/criterion?pm=one' method='post'><input id='b_edit' type='button' value='Edit' style='width:80px' onclick='DvdMine.swapEdit(1)' /> <div class='one_lbl'>Comments from ash:<br /><textarea class='ronly' readonly='readonly' wrap='soft' cols='70' rows='5' maxlength='4000'>Spine #1</textarea></div><table class='one_top'><tr><td><table><tr><td class='one_lbl'>DVD rating:<img id='ex_b_user_dvd_rating' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Film rating:<img id='ex_b_user_film_rating' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Sort text:<img id='ex_b_sort_text' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td>001</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>Retailer:<img id='ex_b2retailer' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Order date:<img id='ex_b2order_dd' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Order number:<img id='ex_b2order_number' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Price paid:<img id='ex_b2price_paid' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr></table></td><td><table><tr><td class='one_lbl'>Genre override:<img id='ex_b_genre_overwrite' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td>Use Default Genre</td></tr><tr><td class='one_lbl'>Trade or loan:<img id='ex_b2trade_loan' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td>Neither</td></tr><tr><td class='one_lbl'>Loaned to:<img id='ex_b2loaned_to' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Loan date:<img id='ex_b2loan_dd' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Return date:<img id='ex_b2return_dd' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>Asking price:<img id='ex_b2asking_price' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr></table></td><td><table><tr><td class='one_lbl'>Custom 1:<img id='ex_b2custom_1' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Custom 2:<img id='ex_b2custom_2' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Custom 3:<img id='ex_b2custom_3' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Custom 4:<img id='ex_b2custom_4' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td class='one_lbl'>Custom 5:<img id='ex_b2custom_5' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td class='one_lbl'>Date of purchase:<img id='ex_b_owned_dd' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td>2004-02-07</td></tr><tr><td class='one_lbl'>Date last watched:<img id='ex_b2last_watched_dd' src='http://dv1.us/d1/00/bq00.png' width='17' height='17' align='texttop' alt='Explain' /></td><td></td></tr></table></td></tr></table>

	GX->setLabelSeparator(':');

	pStr << EchoRowTop;

	if (GX->isCollection())
		pStr << EchoRowBottom;
}

void CSnippetDvdOne::EchoRowTop(CStr &pStr)
{
	const bool lBigTitle = GS(a_dvd_title).length() > 400;
	const CStaticStr lRowSpan = lBigTitle ? CStaticStr::empty : SC(" rowspan='2'");

	pStr << SC(
	"<table class='one_table'>"
	  "<tr>"
		"<td class='one_pic'") << lRowSpan << SC(">"
		  "<div>") <<
			  PicMed << SC(
		  "</div>"
		"</td>"
		"<td class='one_tit'>") <<
		  EchoRowTitle <<
		  EchoRowMiddle << SC(
		"</td>"
	  "</tr>"
	"</table>");
}

void CSnippetDvdOne::EchoRowTitle(CStr &pStr)
{
	const bool lBigTitle = GS(a_dvd_title).length() > 400;

	pStr << DvdTitle;

	if (lBigTitle)
		pStr << EchoRowLongTitle;
	else
		pStr << EchoRowShortTitle;
}

void CSnippetDvdOne::EchoRowShortTitle(CStr &pStr)
{
	const int lDvdId = GX->getKeyId();

	pStr << SC(
		"</td>"
	  "</tr>"
	  "<tr>"
		"<td>"
		  "<table class='one_top'>"
			"<tr>"
			  "<td>"
				"<table>") << 
				  CField::eField_zz_a_director		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_zz_a_publisher		<< CSnippetField::TrTdLabeledValue << SC(
				  "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
				  CField::eField_a_country			<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_source			<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_media_type		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_region_mask		<< CSnippetField::TrTdLabeledValue <<SC(
				  "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
				  CField::eField_a_film_rel_year	<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_film_rel_dd		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_orig_language	<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_zz_a_genre			<< CSnippetField::TrTdLabeledValue <<SC(
				  "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
				  CField::eField_a_rel_status		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_dvd_rel_dd		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_dvd_oop_dd		<< CSnippetField::TrTdLabeledValue <<SC(
				  "<tr><td class='one_lbl'>Links:</td><td>") << CSnippetDvdOne::Links << SC("</td></tr>"
				"</table>"
			  "</td>"
			"</tr>"
		  "</table>"
		  "<div id='one_support'>"
			"<img src='http://dv1.us/d1/00/bc00.png' id='ic_") << PAD(7) << lDvdId << SC("' height='22' width='24' alt='Add or remove from cart' /> "
			"<img src='http://dv1.us/d1/00/bd00.png' id='id_") << PAD(7) << lDvdId << SC("' height='22' width='24' alt='Compare prices' />"
			"<p>Support FilmAf by using our price comparison engine :)</p>"
		  "</div>"
		"</td>"
	  "</tr>"
	  "<tr>"
		"<td colspan='2'>");
}

void CSnippetDvdOne::EchoRowLongTitle(CStr &pStr)
{
	pStr << SC(
		  "<div id='one_support'>") <<
 			CSnippetDvdOne::Cart << SC(
			"<p>Support FilmAf by using our price comparison engine :)</p>"
		  "</div>"
		"</td>"
	  "</tr>"
	  "<tr>"
		"<td colspan='2'>"
		  "<table class='one_top'>"
			"<tr>"
			  "<td>"
				"<table>") << 
				  CField::eField_zz_a_director		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_zz_a_publisher		<< CSnippetField::TrTdLabeledValue << SC(
				  "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
				  CField::eField_a_country			<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_source			<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_media_type		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_region_mask		<< CSnippetField::TrTdLabeledValue << SC(
				"</table>"
			  "</td>"
			  "<td>"
				"<table>") << 
				  CField::eField_a_film_rel_year	<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_film_rel_dd		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_orig_language	<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_zz_a_genre			<< CSnippetField::TrTdLabeledValue << SC(
				  "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
				  CField::eField_a_rel_status		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_dvd_rel_dd		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_dvd_oop_dd		<< CSnippetField::TrTdLabeledValue << SC(
				  "<tr><td class='one_lbl'>Links:</td><td>") << CSnippetDvdOne::Links << SC("</td></tr>"
				"</table>"
			  "</td>"
			"</tr>"
		  "</table>");
}

void CSnippetDvdOne::EchoRowMiddle(CStr &pStr)
{
	const int lDvdId = GX->getKeyId();
	const unsigned char	lPicStatus = GC_(a_pic_status,'-');
	const CStaticStr lHasPic = lPicStatus == '-'? SC("Upload Picture'") : SC("Upload Better Picture");

	pStr << SC(
		  "<table class='one_top'>"
			"<tr>"
			  "<td>"
				"<table>") <<
				  CField::eField_a_num_titles		<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_num_disks		<< CSnippetField::TrTdLabeledValue << SC(
				"</table>"
			  "</td>"
			  "<td>"
				"<table>") <<
				  CField::eField_a_upc				<< CSnippetField::TrTdLabeledValue <<
				  CField::eField_a_sku				<< CSnippetField::TrTdLabeledValue << SC(
				"</table>"
			  "</td>"
			  "<td>"
				"<table>") <<
				  CField::eField_a_list_price		<< CSnippetField::TrTdLabeledValue << SC(
				"</table>"
			  "</td>"
			"</tr>"
		  "</table>");

	if (lDvdId)
		pStr << SC(
		  "<div id='one_improve'>"
			"<a href='http://www." BASE_URL "/utils/x-pic-mngt.html?obj_type=dvd&obj=") << lDvdId << SC("'>") << lHasPic << SC("</a>"
			"&nbsp;| "
			"<a href='http://www." BASE_URL "/utils/x-dvd-edit.html?dvd=") << lDvdId << SC("'>Improve&nbsp;Title&nbsp;Info</a>"
		  "</div>");
}

void CSnippetDvdOne::EchoRowBottom(CStr &pStr)
{
	const int lDvdId = GX->getKeyId();
	const CStaticStr lViewUserId = GX->getViewUserId();
	CStr pStat(GX), pJava(GX), pUrl;

	GX->setExplain();
	pStat << SC(
			"<div class='one_lbl'>Comments from ") << lViewUserId << SC(":<br />") <<
			  CField::eField_b_comments << CSnippetField::DisplayValue << SC(
			"</div>"
			"<table class='one_top'>"
			  "<tr>"
				"<td>"
				  "<table>") <<
					CField::eField_b_user_dvd_rating	<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b_user_film_rating	<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b_sort_text			<< CSnippetField::TrTdLabeledValue << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b2_retailer			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_order_dd			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_order_number		<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_price_paid		<< CSnippetField::TrTdLabeledValue << SC(
				  "</table>"
				"</td>"
				"<td>"
				  "<table>") <<
					CField::eField_b_genre_overwrite	<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_trade_loan		<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_loaned_to			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_loan_dd			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_return_dd			<< CSnippetField::TrTdLabeledValue << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b2_asking_price		<< CSnippetField::TrTdLabeledValue << SC(
				  "</table>"
				"</td>"
				"<td>"
				  "<table>") <<
					CField::eField_b2_custom_1			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_custom_2			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_custom_3			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_custom_4			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_custom_5			<< CSnippetField::TrTdLabeledValue << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b_owned_dd			<< CSnippetField::TrTdLabeledValue <<
					CField::eField_b2_last_watched_dd	<< CSnippetField::TrTdLabeledValue << SC(
				  "</table>"
				"</td>"
			  "</tr>"
			"</table>");

	if (GX->doInput())
	{
		CStr pComments(GX);
		pComments << CField::eField_b_comments << CSnippetField::InputField;
		pComments.replace(SL("\n"), SL("\\n"));
		pJava << SC(
			"<input id='b_cancel' type='button' value='Cancel' style='width:80px' onclick='DvdMine.swapEdit(0)' /> "
			"<input id='b_save' type='button' value='Save' style='width:80px' onclick='DvdMine.validate(1)' />"
			"<input name='act' type='hidden' value='edit' /><input name='dvd_id' type='hidden' value='") << lDvdId << SC("' />"
			"<div class='one_lbl'>"
			  "Comments from ") << lViewUserId << SC(":<br />") << pComments << SC(
			"</div>"
			"<table class='one_top'>"
			  "<tr>"
				"<td>"
				  "<table>") <<
					CField::eField_b_user_dvd_rating	<< CSnippetField::TrTdInputField <<
					CField::eField_b_user_film_rating	<< CSnippetField::TrTdInputField <<
					CField::eField_b_sort_text			<< CSnippetField::TrTdInputField << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b2_retailer			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_order_dd			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_order_number		<< CSnippetField::TrTdInputField <<
					CField::eField_b2_price_paid		<< CContext::eSpin4 << CSnippetField::TrTdInputField << CContext::eSpin0 << SC(
				  "</table>"
				"</td>"
				"<td>"
				  "<table>") <<
					CField::eField_b_genre_overwrite	<< CSnippetField::TrTdInputField <<
					CField::eField_b2_trade_loan		<< CSnippetField::TrTdInputField <<
					CField::eField_b2_loaned_to			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_loan_dd			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_return_dd			<< CSnippetField::TrTdInputField << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b2_asking_price		<< CContext::eSpin4 << CSnippetField::TrTdInputField << CContext::eSpin0 << SC(
				  "</table>"
				"</td>"
				"<td>"
				  "<table>") <<
					CField::eField_b2_custom_1			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_custom_2			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_custom_3			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_custom_4			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_custom_5			<< CSnippetField::TrTdInputField << SC(
					"<tr><td>&nbsp;</td><td>&nbsp;</td></tr>") <<
					CField::eField_b_owned_dd			<< CSnippetField::TrTdInputField <<
					CField::eField_b2_last_watched_dd	<< CSnippetField::TrTdInputField << SC(
				  "</table>"
				"</td>"
			  "</tr>"
			"</table>");

		pStat = CStr(SC("<input id='b_edit' type='button' value='Edit' style='width:80px' onclick='DvdMine.swapEdit(1)' /> ")) << pStat;

		if (GX->initOpen())
		{
			CStr pAux;
            pAux  = pJava;
            pJava = pStat;
            pStat = pAux;
            pJava = CStr(SC("<script type='text/javascript'>DvdMine.onePagerText=\"")) << pJava.replace(SL("\""), SL("\\\"")) << SC("\";</script>");
		}
		else
		{
            pJava = CStr(SC("<script type='text/javascript'>DvdMine.onePagerEdit=\"")) << pJava.replace(SL("\""), SL("\\\"")) << SC("\";</script>");
		}

		pUrl = GSn(SC("SubmmitUrl"));
	}

	//CUnicodeStr lComments(GS(b_comments));
	//lComments.db2TextArea();

	pStr << SC(
	"<table class='one_table'>"
	  "<tr>"
		"<td>"
		  "<form id='mydvd' name='mydvd' action='") << pUrl << SC("' method='post'>") <<
			pStat << SC(
		  "</form>") <<
		  pJava << SC(
		"</td>"
	  "</tr>"
	"</table>");
}

void CSnippetDvdOne::Links(CStr &pStr)
{
	const CStaticStr& lAsin   = GX->getStr(CField::eField_a_asin);
	const CStaticStr& lImdbId = GX->getStr(CField::eField_a_imdb_id);

	if(lAsin._Length > 1 || lImdbId._Length > 1)
	{
		if(lAsin._Length > 1)
			AmzLink(pStr, lAsin, GX->getChar(CField::eField_a_amz_country), SC(" class='dvd_amz'"));

		if(lAsin._Length > 1 && lImdbId._Length > 1)
			pStr << SC(", ");

		if(lImdbId._Length > 1)
			ImdbLinks(pStr, lImdbId, SC(" class='dvd_imdb'"));
	}
	else
	{
		pStr << SC("&nbsp;");
	}
}

/*
 SELECT a.dvd_id, a.director, a.publisher, a.country, a.source, a.media_type, a.region_mask, a.film_rel_year, a.film_rel_dd, a.orig_language, a.genre, a.rel_status, a.dvd_rel_dd, a.dvd_oop_dd, a.imdb_id, a.asin, a.amz_country, a.num_titles, a.num_disks, a.best_price, a.upc, a.list_price, a.sku, a.pic_status, a.pic_name, a.pic_count, b.pic_overwrite, a.dvd_title, b.genre_overwrite, b.comments, b.user_dvd_rating, b.user_film_rating, b.sort_text, b.owned_dd, b2.last_watched_dd, b2.price_paid, b2.trade_loan, b2.loaned_to, b2.loan_dd, b2.return_dd, b2.asking_price, b2.retailer, b2.order_dd, b2.order_number, b2.custom_1, b2.custom_2, b2.custom_3, b2.custom_4, b2.custom_5 FROM my_dvd b JOIN dvd a ON b.dvd_id = a.dvd_id LEFT JOIN my_dvd_2 b2 ON b2.dvd_id = b.dvd_id and b2.user_id = b.user_id WHERE b.user_id = 'ash' and b.folder = 'owned/criterion' and a.dvd_id = 3252 LIMIT 1;
+--------+-------------+--------------------------+---------+--------+------------+-------------+---------------+-------------+---------------+-------+------------+------------+------------+---------+------------+-------------+------------+-----------+------------+--------------+------------+-----+------------+-----------+-----------+---------------+--------------------------------------------------------------------------------------+-----------------+----------+-----------------+------------------+-----------+----------+-----------------+------------+------------+-----------+---------+-----------+--------------+----------+----------+--------------+----------+----------+----------+----------+----------+
| dvd_id | director    | publisher                | country | source | media_type | region_mask | film_rel_year | film_rel_dd | orig_language | genre | rel_status | dvd_rel_dd | dvd_oop_dd | imdb_id | asin       | amz_country | num_titles | num_disks | best_price | upc          | list_price | sku | pic_status | pic_name  | pic_count | pic_overwrite | dvd_title                                                                            | genre_overwrite | comments | user_dvd_rating | user_film_rating | sort_text | owned_dd | last_watched_dd | price_paid | trade_loan | loaned_to | loan_dd | return_dd | asking_price | retailer | order_dd | order_number | custom_1 | custom_2 | custom_3 | custom_4 | custom_5 |
+--------+-------------+--------------------------+---------+--------+------------+-------------+---------------+-------------+---------------+-------+------------+------------+------------+---------+------------+-------------+------------+-----------+------------+--------------+------------+-----+------------+-----------+-----------+---------------+--------------------------------------------------------------------------------------+-----------------+----------+-----------------+------------------+-----------+----------+-----------------+------------+------------+-----------+---------+-----------+--------------+----------+----------+--------------+----------+----------+----------+----------+----------+
|   3252 | Jean Renoir | The Criterion Collection | ,us,    | A      | D          |           2 |          1937 | 19370608    | ,fr,de,en,ru, | 28950 | O          | 19991123   | 20100331   | 0028950 | 0780020707 | -           |          1 |         1 |      33.85 | 037429121924 |      39.95 | -   | Y          | 003252-d0 |         3 | -             | Grand Illusion - The Criterion Collection<br />( Grande illusion, La )<br />Spine #1 |           99999 | Spine #1 |              -1 |               -1 | 001       | 20040207 | NULL            |       NULL | NULL       | NULL      | NULL    | NULL      |         NULL | NULL     | NULL     | NULL         | NULL     | NULL     | NULL     | NULL     | NULL     |
+--------+-------------+--------------------------+---------+--------+------------+-------------+---------------+-------------+---------------+-------+------------+------------+------------+---------+------------+-------------+------------+-----------+------------+--------------+------------+-----+------------+-----------+-----------+---------------+--------------------------------------------------------------------------------------+-----------------+----------+-----------------+------------------+-----------+----------+-----------------+------------+------------+-----------+---------+-----------+--------------+----------+----------+--------------+----------+----------+----------+----------+----------+
*/
